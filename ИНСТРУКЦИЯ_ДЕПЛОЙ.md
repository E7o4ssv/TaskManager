# Что сделать вам вручную (3 шага)

Всё остальное уже в репозитории: workflow деплоя, скрипт настройки сервера, ключ для GitHub Actions.

---

## Шаг 1. Добавить ключ на сервер

Откройте терминал и подключитесь к серверу (введите пароль, когда попросит):

```bash
ssh root@194.67.127.158
```

На сервере выполните **одну** команду (скопируйте целиком):

```bash
mkdir -p ~/.ssh && echo "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIIkdfiVlTqxnZNSB9i9aAvGjd6JoOjN2QQZfbLgBJkPW github-deploy-taskmanager" >> ~/.ssh/authorized_keys && chmod 600 ~/.ssh/authorized_keys
```

Затем выполните **настройку проекта** (скопируйте и вставьте весь блок):

```bash
apt update && apt install -y git
curl -fsSL https://deb.nodesource.com/setup_20.x | bash -
apt install -y nodejs
npm install -g pm2
mkdir -p /var/www && cd /var/www
rm -rf taskmanager
git clone https://github.com/E7o4ssv/TaskManager.git taskmanager
cd taskmanager
cp .env.example .env
npm ci
npx prisma generate
npx prisma db push
npm run db:seed
npm run build
pm2 delete taskmanager 2>/dev/null || true
pm2 start npm --name taskmanager -- start
pm2 save
pm2 startup
```

Ответьте **y** на вопрос pm2 про автозапуск. Выйдите с сервера: `exit`.

---

## Шаг 2. Добавить секреты в GitHub

1. Откройте: https://github.com/E7o4ssv/TaskManager/settings/secrets/actions  
2. Нажмите **New repository secret** и создайте **три** секрета:

| Имя | Значение |
|-----|----------|
| `SERVER_HOST` | `194.67.127.158` |
| `SERVER_USER` | `root` |
| `SSH_PRIVATE_KEY` | Откройте на компьютере файл **danywhite/.deploy-keys/id_ed25519** (без .pub), скопируйте **весь** текст от `-----BEGIN` до `-----END` и вставьте в поле значения. |

---

## Шаг 3. Проверить деплой

После того как шаги 1 и 2 сделаны:

- Откройте приложение: **http://194.67.127.158:3000**
- Сделайте любое изменение в коде и выполните `git push origin main` — во вкладке **Actions** репозитория на GitHub должен запуститься деплой и обновить приложение на сервере.

На этом настройка завершена.
